# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: aDvtAMTRI/frcm3r/jUapBSsGoZ2xlT6slO9nE+v0dAnAihCuFxM449rVdptc3kvLvN3fTo1P53fF72WELTG6lzsAgweYU0Uj9GsyQuKDJRdqNNXm+wLmyfUBgGMQhu7iq0Ii3zMdene0Q4zRDEHyp9ngcuxcMzYeRIGbXwMMIzRaqANnTVZH11BwxQYcV7WNgvY1Z3xbxyYioEgwJnv+LLynKl0s5/ZpF+ez7nsn42sYP8WqmgVPlexZO5HrefmK9kSmlOxhN6uE+0ZQenFgEnpOt64pqUabtYIWZjALgnDzmRvtyNY5/GRJDBLn67Ki6KwCGCEMELG3sClFyDeZN2P223qrYt1n00YQxqZhF3fTB962HSD3JUzyTXL+q6W8m18vO5lrlQvEtf7ELqC/QznMYm35SAXkKQ9VJKU2KXzwpr2dzIvP4qMCUj/Y2otpvzAEo9QirvelxfSacUiEEexYEhCu33dEYnpirbGoXSh1S2qGypUFoP80CBf8ngcJrUt4X6PjDs55y/wiOM9nJpOSPOMRahfdl57KPYWNSVBoI+WEY0QkeTgdHyDSVHnRL7ptAdOtU53MrntUfnope3GEPiGwYeFh5mcqbM7+4jsJlr0YcHC3UE/jDCyAHTdo1cIlmYPpjRghoyflyv9yvPdGW2VB6mHNBzKGB2sFeA=
  - secure: XguCaBz6q5Bfhf442gDWPcUCZV8N1BBuKSynJADX63+mE4ss8davfESTVn1N8uxFapKwfWwJVSlt8JvsJ/UaRubk8aClYGMReBB85nob8fCR2q1cyBkXIRX6uYiGnWN8Bhm+rGluf0WIhrUmV1C9VkdQUG13lRLEcsptayJHzle+VZN5j/joa9aGHNrU5ob8YOBceH7oATCTeE/RPKW/OPKySIDYWUJUCUarUk6PohFH5r7sSBVuf2tOn8KglzfiZAhLSq0Se8/8+xp6y0ZmYAFhW02IjAjlgY8bhrZnN+p8Lvu9X/Dar3jF5p7Nb6tY9BOFH5qkBm/wNxx3cnKr2JLo87f97KDVGrueSG5KKKJ7k8XHYk/DUKBBEGhdAMFujstYL8zI60sCcCdWvlvp72ueh3LagUeBZigmzGe6oWTU/uz613gE4G1vJkcMlrqanolvaYPWAyjA1ahzMsXVaiHiqJ2rT4ieTQZMlYS1by/VcFmHMKCt30z2R/eQd0Oor7SpCE7Q3mN6TM/V4ZLHxP7cFUbbkIPT45y8AI8QwPq4X0+lCRWpJRSeDG7rDvybktCKEfhIql70FsHw5xvGNnW+W4I0lE4/Xz4+gYFKdhVd27y6lidrkNDgqhuzokEkFLpmKFr00gHOB20K+Sw34jAs4YZUqLJssrM4w/sTFxc=
  - secure: GQDUvmFl/iRwcVwg98bIsb1D49hK+FEKFF3XAlsM+HcjLPiUx6W/0HhdZCehU9VsylM+77cYLH+GJFnExT/4ybAZRoH0TJmMdpdWN/GfhfNhhn7l5oKjX7ZjyeyMhy4M5wthVsXHBNYxvgUqbp9xOzsdX/bbTN8CVvbJyEfL5q+5lOySwX37KA7A0e0KQ2otBUkmz9BPUpWbn+SClaW5Vbd8lWk+FwXoQIcfGI3pUwSvoVmd6lJXlXd7amJg6sWlW/fxGYxSGdkfxnZqDle1l9BmIqf0KpaWMFF4ySqh6WLQyAhZuMLhtRHXqPihGC9kLzz6HAPAWc5ViHTyPpYwMsKI5kDniS+7Yb2qE/QKdnqQG6iBpJLvoLnlUPDuJuxc7pGmKRlp6w8Rmvph+3xlzeCcDttAi155VZl8bdzQGw3LvRC6mNwDeHtTci4fgBLu26V/kr+6tHhUEMWRunOXaxP2DQs4qFk2xHOsArwVn68/G8ha0iQgoHSGegA/iVOcZIWGL1A0RBp9ghz+QXeo4NQekL5LSp7ORA1Z65YNWTmuNU3eoRboOCg56c+PCaKjioDWoTFh/Hi8XawrkY9qYDLgNf3pTWh8vgGFSzAj+6n5Y2yaU/jUPljP5DLFk8N4YOR8Xzt2e3UiqTgCCeLvP8jCoWBqSW7YTtpNRx7211Q=
  - secure: nr4pmxQsB6dJbA8fhyxKg+JyXh1nlrIbMf2zzlmYqfP2ow40S0pxXrv5/Cy0kPi/Y1z8NppQJTOkCzPhuWCUBURV45mneu8QqkGUYfkivOQvNyJCcezmMtAJ24Fx+3vsOGYwnzPrCXc3bPCMYRimIpdWAU5qs39SALrsonEBwx8gpzIlltuX+99F1GBwWUMPcnAkZFIuXOQqdDm3OGW173XviT42tmXr+apJNbvNDEiB+o8XAqJ6ekBLNL4rx5d9Rwhf7V1aHDDE1hZLTI86bgsX+Y3zvW1PPwGhVe1dbCQJX81JH8uFZjx69y0hArzTI6PvLrAhiIYgKtgEK2pg1lk8jrGgWhvrE4RKb6vVFSnkOIdmykQVmmc3fv7TANNDXeYlPF6Ro5v1y6wHO5NQTvAlnyGOPx2XZYzECja2529B51swgyHwgEqVQRuOPYy+QevGm565e+c95XD6OonK/iUX+AHreZJu6W0URQZh4Ht+nmfaJ6EMw/WXDVMhXilcmpz3xciTYUMKdZeIxX0UucKyFciaorGMBkm8voI/9Xdl8cLLmRg5AZLpOiSydnk7JrtV8ej7SY3vHebgsUl3ZZK2/Xam60EW2p5DMo6ZgZEzJvE+6w6HScPqXmUs9WHxbbnvIuqTtGXRp+6lks+64S8enjH2OwDFrAmMurfHzto=
  - secure: n22rL651TxTOrIY/UXlC4m1JF0ExfVkAHO4e6BTVrte7YhJthWoUHS0HAmOM6XqVtCOwNWmTIfWLl9VfKVe4g6/mK2xsEL13ORnpDEKyFSHcrbEMohElmOUUpaM+Wn8onJBpehbmtFKp7qHcuL5TdLWgy/WH4qhgVUZmpxNZU0R+LTHKjdZzEA8PSuMoyqgYJqH6dV92Ucz+oTZBwzTNGCGLCzUN/XF307ph3x58aFoNwm22/uIiw8O/pDt5u9Tfjad/y4bHyX/LZ2EiM1PSfh12mi4qgYCG4d+dfK5N3+tTSGsEpm7FWiq444rPU01SKMPtFKgKFr5FN/ig9ddlXO5O6FBL1c2rc9o5+u17C80tmjUD6P79ijp0wAkJqf5q2c3DhKY76933hqIOgFLXj2wr9HA5tMjB4KDSjSgloy1QNg54xxrL40b7QNQj6OqdOR1tdmRWr9nMwxfq47tDi6t7lWE9eBRjPqWJX/bWvnn30gdkk0/GlpOqlg2CgxbXVoC9dlBXH8gsoxVAycPi8S3ZgA9UvAd6WmZojBuernFhVBQx2g88S7MQ3Opg4Bqqp3NcconeX6O7MI67ioqrV7+XbEn7qO7G5s9tNE7+m1yPXjys3mzv1Uv06b9XTdULacDRP6srvnFcvIIxEmjjagjzBw2WXnrvTKM0OxmvSzc=
  - secure: S1DPyB9BCPaVeeaogiMw3u8oSzUwpSyZcKbJqQDjCS9oFcFts5i+nROBgx+IK+45L14REns48Mu36t0Y2XBjpsOOrBDWNrRx1RqrV38YLNsj6XTMw98Z67gw/cHQtXc3ONY1DxyhcEDQJmzOXr1gNd7vQ/XvYRs+URBq3XSid1WPuvJISlyJGip29ItUjz0WIashmGCS+PCG33Pg988rapPjutudSL+NKNOZVHy3Gm/4Pv6AfuGMC4mm6UeWMdkpfLcTTc7j814hiRlLyE3qw5WKiYNqupkHzfUJdoZYjT+qnU1lOpqJZuvsDKxlbmfTxV37jNhj83RUs9SVqAb2I3eMFMgrpiuubliX+s9MnZ2fc4/O3ZKN0re2EYxapqSgiAoTFYASFL6FvKu8UrQx1M4nDBU65uUmaAR5p+dS+eASEl26TzVanOf4Ut4IQWMas1Ia5K+eIQC31O9wo+rnR14VViUNwDtVKpfYCMk/oAkJBlGPrjij1zKrSfzDO/go3UXtCG4wVSkxcuwQh0hP+DLntlz6XMIrqh+R+9m1UWov/mGUBStdUcjO+1V9nthB0TmU3dwwa0mSo6znDszqLoQYDKOWxdsKZd0WrnP5Zx49Dh4JyeS17afNtI1cyxOOFf9G3Fmb9+8GB0Svp3lLR9AOsF4aV1SZ/eOpbTeETwc=
  - secure: D+Vci8LnKJOMxLelwHj8xxb3OOKp4EO6U0Qw6NEtSeMbB0F7wb4T2ksZrBWeAHxSATHKYOv9l+BcvZdiwUd0esC8IEBm0PR0ef/rd+HpzOcHp5FYGVjKIw2UOYvZJ4S1ePplRgMCMTjW1nzsllcmI1qkZfzqnaGoOmbnWNqH6qrChQW2928VzN7pdTUIW3ArbrPVrwZdF5SOZwYFjX2NIMIjIFtIBSHiBEBeQWlyokZHBqEKnxrEpjLcPywWKrEFnrbwYwCPLeYfakE/7We10MfMrOn+eASXPJOKlSSh2KzPKAf4wV8OQ/knEfD+QvUoMfuc0oXo2eokfzWv4Urhe7FQrxGIC/UO7yzVuaFzEoH6wgUoZSJO0hxKwbrVK2KLXWq8e3n0C0l96I2R+u9a7/7J9vmy+/sXYQAPoIU7XsOMQWwrIklXRRBf2UUq43oBtU2rBJKmGB3FkFDPtq3XHOZX+CYiGHq6Xd79p6TzlT6yKLL78VoGTwI1b1IvEjKMnlOEdzOxPNdrI0q+sWr17dExwg1+x3Jo2gS7xsi/TbrfRO01mIK/fOVj5s1+BC57Hf07zmgjsw1mk0RbOvK7kaKhTAelWEk3Z2/D2/EYgx1cxAM3bPLvDNmLeE77161heJoW7GIhCcEV4V6JliUxEs4FX2XiPdwh/+yG/H1Ylck=
