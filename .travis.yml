# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: BH0kdb8eSbjqID5QeoRt/0IUFK8hJeSQb+VuDbqC7cl2uGZq+w/1bOi18S3uQkx8bLpF6V9HA8LIw9ST3I/AkUdaJUjS9VrgSz01jDEW+m7H7lZDYRg9HOgPaFBFBzy+VEijUnBk/mJlZBLSzWl+edechaFvT19A2/Vu9ngdGOdzpAjtcpOeUY/aBtjS317zWQgVm0RtOwxCKwhRl+FE8I7K2IFtlxUDhZwaHWAOfrdyWzN3IlAf4FrDl8WVipXQCtQ9wQoBfgYPc58Cgb0tGUTnzBhr8EeOZB1SXvrwDKg6Vo1sraGTIAxv6jvNX2u72gJUKLQ8KMBXQKw0cPxdccjpSOTywU18rLZ3gn4cmMWoajQTbSYkcYT2qzxk7z9RjE5Oweg8TTuwvpuqORrFCeC6RNstcC33/lSem5GIurs4Sj77Qpy9dTI/8PIrVLLn240IlqFrmexgpzOzxm0od+QHxeUaDk5Xd9nEWsXY73XwNe9SojZcUlGK+q3qdkYy82BbrBU202ifYcZW2zry+QXUtIuyMVdzAedRKPlAZhMLr5okgWZpfejIxhSxZDAdhJJre7V728g3A634t6uHKw7aBssEOXS9V67EvzeWBS64ICHTLJVHYepFjdldSdhp3TtXY4guXGHMAbL6GFojW5Yg31/+9LhPTyJhdpUCwws=
  - secure: lD0J+fYc0f2BE2Ryv1uthQHf8O28id7o7PGvonzGonq+56vQUAzw/1pStH3PEpqycEORLKp4D5Msx0mZgPSvKesZqZtt4GSF+KTdhGhnaLnrONY6HVUptJPbaL9mGDKzqPw295sEpdEuS5gPOO29eFJ/LB4X8nWHeV3kzOWfcWVmQqypxYj6L+0RQoaMkKj50p1yfDPLwD2C6Sz8ZvEatvJSoQz2M50hVBexlMya55S75VuE2/J6aIG2fgdfsa1ErLh8AQI9KTS4AG2qrvMvU5mbHLUYNszX4BLdNSxHBPbyWq5j5tM13zXE5+2oOCu9GBROv9sKY+RQ2Vl/8EfuZpe7gzTrqD8VF6Enk3ZomP7QUti1F4MFd/ulk78C68ybqG7n9Hqpgjfeer1uhX9bRdDjt85EiHLJqS/VRwDWnH0nfLBLrLBwcX/xDQAoSTETtQ80VzBtXFdpjL6dpsOzilsU+qONDV5mk66dx2/fGmP/qbu4eqVx2jOmNp37JJpqUM78XtN8VzvOGcinbK12ztwm1w1aAQDyp05VslZ1PtsuvU8XR+TQqMr3OrRAYKYFWifMXnSt3gEOoqpU54M69UGFCJpJ3SZI4g+TjxS/kyxiZlu4Zs35RW30Blxxy1Qd541xfMPU4u3Oj+IZb0WgnX9OE+9x3t9DdezeNe2HUts=
  - secure: i1M//sAi0Kx8iEHQZdcDN1CrmL/RQXqVhI7t286c5j4YycuqrK0vhPcqrD05hZQhkiJ10L8B24dRj/Q9yxc9JDfg2Xuy/VS74RVjMigghN80GBB2d9eHAGo9LD1zbbf76CehyfEDzC9uQlQcxCrfo4h/l5SiRgehhEAXemNph145sSg2rJLi9AQGfA+x3/1enK75HW9JaJMs+pdlEDq/VsVTr00c1DtwU/9uB8bGCzSkTdX/xuee+vjzTJfL/5HVbRiiiGUQcWS94d+djrJYJXD7qcZ2X7BlrO3sQf4Az7r2NP9wwBxTVGU7Nx6jJ157AzwrOdbziGkUcot+jkJHStNZI5TbllFRO5x8dWaK0QKLsB1RD1LuSmpmhdN+6kFaR8JzJtDnJt3o8xn1b3ovAYW8P8uey8+tDclo7HZjQjRAiUUmNbLWnPLAJw1WPGypx2TkyQzXEc2VqaIJae+JJXblFlAzQ6/70PodS0JFbE+D38hjURo69tDIoSWRQXCOLdgkdVf5AjuJSWELsu/NHyFR53t0GYTDOYfd3kDQ29CfNLyAosv5qfmLa6dzPLGKoOu2r+djwWCaOIdj3X5SEiyPE3UtKS4Yt+6sZTp/CU/o6LMuG46s8bqnbrvQspFoQc0Wkro3H+ZaHkL2Oa8Vm0dsxC8ZIncen6wcDysl9YY=
  - secure: M2528d/CBTfLMvbQ0tgC4rymnmvgkSwzSx7a7tNYEwqtlmjpHwpI1RYZaW5ZmsQ5nk+qjfWHhualE7/0+H9CIOn1U3v0hC3dMrTp+xos877xxv8ev3AiL6zs3waZ0BX2IMFed+hOXM2k1bI4z5EzUTpNx7bmbzI7OylzvwVTLmYX30OG0Dq3P5HWKxbECcf3V1sx2JzLrsayWGMDeUJxGMB6IbAT1IoBH9O3RmySO/e1QZgv1faCQFIQ9oieBTjLwkteHNTbXBU5UwmC8WeRBRvnszp8yWfNfS4o/kTlqBRCLEMco2wVGIDUF+l+EncMvyCGltXv8pwti/RWoDJnX0ufhxgcoCqnU6PwYqdSqB4LFRkX5dVHB+kPXPR5KhdAgUEfBUxzKyGAPu06f96JqomdCf6HwswpEut0cFCzAOISJTom9xrUg506UGx75FJn9WoclDaiCoVK7eEcHNYGevSk6qExzm3S/gQHX9p8KCJlEOejF0vBO5L6Wz9JODCBn0T3xxK0yUP6dpXPFB9dKGwzHw0bHPbBBgVV1G19X++AwoRkYSN4e6od3/YZBWAvPgBjGYUz5z7TByoxoOptaQzYI0ojwwbKr/ZfqX8EuSqmbuNra7KU/Kc19vhh7eAJoQi282vWl+xiD0w4+pjUnVbbuor0CYX+ANwbf1nB73w=
  - secure: OqCccN47N/JpDa0jzv6mfLOOoPlXsMPh+VakUXHIBGrsWsZ1W0/HjIGZXjZtX8WPlENsdPXmXCz9Z2iZ1KGGYbLA13U7IIvJX7iVle2T1p2Y7mA4AcjMV+uP/gUBcFDttB/joJENAIZxl0gFXfrzvTNI79XMcfZp31bpE8goLY019i5sOky352IxdVT2KZJrr7JWX8B2wwaQ6fTWwy+EIhxDozSpp7ceiRe6d10ljQ9vLhCF2sQcjsY9i/29fmpXhHxfEwBRxim83uisdciMRFesJkYES/ZWh+UjrIOkW7nr4hSDx5DVgpUybQ59/seQ9pmpAHMyor3n8Th6s/aPk4CrvIARfB5r9NNkDFcFU9jPpUlVHDjWeEKoTYTUKLhE6UfwZDumCy6S9drX7YvTMSfcAGnzUMQ8jWOmunhfXPV1HIiELcd4I/rJbMPmeaY9yytNGs7+f8p5ikrsGbKL8/F4aq9M+2OQOXTyqchxqgVZ6sgDHCfGgFvcFUU8EfBd6Ke6W1mDArthgzdr0RLB6m+KtymjCA4Xw2jvsLr5+8n/YGWTLAmZBYfGntQw9bIp53iu1/eAJnIB9FJ8rJl6eONlUBhn+xZsSbDhStmKRROOfKw1Loagrm2kClwhznKp8Ikf/T1PpLu1TXUrw86NiCn9wI/VagwePYOuzhDt7b0=
  - secure: NeEk5iS8YXtartTZ3/aM2BqP7tw9z2kBkSVjw7vNhsYCf5WWis3NPgduHBuSHh5HmH5GYOzx/YCGH1OqXNBwj2bM5KbWMdqDQiBIpxLKiKlipcEcpXuIA/cYY66Vjd4ktsRkd7Bz4whl8wx2WNZuNUSdgeEs+eVhXgL+P2jFl20Ibgf9DcMORd31WaY4ZZuJHH67HeBhXipMJgAeGifDSheBp2WbiWU3WGEjvGsr/Yi1sYRU2Qr2JAwoVpya4NxWY//XYKzskJEqfveXmqESUlnk4icGe/lzMNHqCqWWc5UEdyJw60XS5VsVgKMNG4q6FGsQYxiStsqHxH9BGBXAEINMZdmTOC7thqj1UX9Lr1/hP7NAL0VEqRUjbhHhN1K92XLmyQF0Wi61j1sgXPJFtTXtAVeJGlWwKj682Rs2whrg76C4gw+ayybFmdHjf3Q41MIRbSMXfzUX9K295CChkNSjSRDkBwIosL0D9bwfWE4NZjPuBaJhovlU+fx2pUjI+WLHsu9l2BDi0kR+vFWsJSx5CHsNiMuUJHtmVzbkcLjFmGcMq/E0VEvNrICuncGaYqAF8fcOlSvXfkk6zCCddnbKLXWl741T/AU6w4Aps50VKt3SFTwvpPbFWqiArJGFN/By9PSAV2hg1P/MDM+UpVWAwZVVYYC+ZnnXIraRdio=
